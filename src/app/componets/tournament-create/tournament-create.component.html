<div class="w-full h-full px-10 py-5">
  <form [formGroup]="form" class="w-full h-full">
  <app-stepper [endFunction]="onSubmit.bind(this)">
    <app-step>
      <!--      <ng-template #labelStep>SETPPPPP</ng-template>-->
      <!--      <ng-template #contentStep><div class="w-[25px] h-[25px] bg-mainBlue rounded-[50%]"></div></ng-template>-->


        <ng-template #content>
          <div class="flex flex-col w-full h-full justify-start items-center gap-4">
            <div class="w-full">
              <label class="block text-white text-md font-md mb-1">Игроки в команде</label>
              <p class="text-mainText-700 text-sm font-sm mb-4">Выбери, сколько игроков может быть в каждой команде</p>
            </div>
            <label *ngFor="let interest of interestsList" class="flex items-center gap-3 w-full px-4 py-3 rounded-lg border-2 border-mainText-500 peer-checked:border-mainBorder hover:border-mainHover cursor-pointer transition-colors">
              <input
                type="radio"
                formControlName="tournamentMode"
                [value]="interest"
                class="hidden peer"
              />
              <!-- Кастомный индикатор выбора -->
              <span class="w-5 h-5 rounded-full border-2 border-mainText-500 peer-checked:border-mainBlue peer-checked:bg-mainHover flex items-center justify-center">
      <svg class="w-3 h-3 text-white hidden peer-checked:block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
      </svg>
    </span>
              <span class="text-mainText-700 font-medium">{{ interest }}</span>
            </label>
          </div>



<!--          <div class="flex flex-col w-full h-full justify-center items-center">-->
<!--          <label *ngFor="let interest of interestsList">-->
<!--            <input-->
<!--              type="radio"-->
<!--              formControlName="selectedInterest"-->
<!--                    [value]="interest"-->
<!--            />-->
<!--            {{ interest }}-->
<!--          </label>-->
<!--          </div>-->
        </ng-template>



    </app-step>
    <app-step>
      <ng-template #content>
        <div class="flex flex-col gap-5 justify-start items-center w-full ">

          <div class="w-full">
            <label class="block text-white text-md font-md mb-1">Основные параметры турнира</label>
            <p class="text-mainText-700 text-sm font-sm mb-4">Введи: название, количество команд и максимальное значение замен</p>
          </div>
          <div class="flex flex-col w-full h-full justify-center items-center gap-5">
      <label class="w-full">
        <input formControlName="tournamentName"
               type="text"
               placeholder="Название турнира"
               class="bg-mainBackground text-mainText-500 placeholder-mainText-500 border-b-2 border-b-mainText-500  p-2 w-full">
      </label>
      <label class="w-full">
        <input formControlName="teamsCount"
               type="text"
               placeholder="Количество участников"
               class="bg-mainBackground text-mainText-500 placeholder-mainText-500 border-b-2 border-b-mainText-500  p-2 w-full">
      </label>
      <label class="w-full">
        <input
          formControlName="substitutionsNumber"
          type="text"
          placeholder="Количество замен"
          class="bg-mainBackground text-mainText-500 placeholder-mainText-500 border-b-2 border-b-mainText-500  p-2 w-full"
        />
      </label>
        </div>
        </div>
      </ng-template>

    </app-step>
    <app-step>
      <ng-template #content>
        <div class="bg-gray-900 p-4 rounded-md border border-gray-600 w-full mx-auto space-y-4">
          <div class="w-full">
            <label class="block text-white text-md font-md mb-1">Даты</label>
            <p class="text-mainText-700 text-sm font-sm mb-4">Введите, даты проведения турнира</p>
          </div>

<label>
  Введите дату начала регистрации
          <input
            type="datetime-local"
            placeholder="Введите дату начала регистрации"
            formControlName="registrationStartTime"
            class="bg-mainBackground text-mainText-500 placeholder-mainText-500 border border-mainText-500 rounded-md p-2 w-full appearance-none focus:outline-none focus:ring-2 focus:ring-mainText-500 [&::-webkit-calendar-picker-indicator]:invert"
          />
       </label>
          <label>
            Введите дату окончания регистрации
          <input
            type="datetime-local"
            formControlName="registrationEndTime"
            placeholder="Введите дату окончания регистрации"
            class="bg-mainBackground text-mainText-500 placeholder-mainText-500 border border-mainText-500 rounded-md p-2 w-full appearance-none [&::-webkit-calendar-picker-indicator]:invert"
          />
            </label>
          <label>
            Введите дату начала турнира
          <input
            type="datetime-local"
            formControlName="tournamentStartTime"
            placeholder="Введите дату начала турнира"
            class="bg-mainBackground text-mainText-5000 placeholder-mainText-500 border border-mainText-500 rounded-md p-2 w-full appearance-none [&::-webkit-calendar-picker-indicator]:invert"
          />
          </label>

        </div>

<!--        <div class="flex flex-col w-full h-full justify-center items-center ">-->
<!--        <label class="flex flex-col w-full">-->
<!--          Дата начала регистрации-->
<!--          <input type="datetime-local" formControlName="registrationStartTime" class="bg-mainBackground text-mainText-700 border border-mainText-500 rounded-xl h-[60px]" >-->
<!--        </label>-->
<!--        <label class="flex flex-col w-full">-->
<!--          Дата окончания регистрации-->
<!--          <input type="datetime-local" formControlName="registrationEndTime" class="bg-mainBackground text-mainText-700 border border-mainText-500 rounded-xl h-[60px]">-->
<!--        </label>-->
<!--        <label class="flex flex-col w-full">-->
<!--          Дата начала турнира-->
<!--          <input type="datetime-local" formControlName="tournamentStartTime" class="bg-mainBackground text-mainText-700 border border-mainText-500 rounded-xl h-[60px]">-->
<!--        </label>-->

<!--      </div>-->
      </ng-template>
    </app-step>
    <app-step>
      <ng-template #content>

      <div formArrayName="stages" class="flex flex-col justify-center items-center gap-3 my-3 mx-1 " >
        <app-button title="+ Добавить стадию"  (click)="addStage()"></app-button>
        <div *ngFor="let stage of stages.controls; let i = index" [formGroupName]="i" class="stage-block bg-gray-900 p-4 rounded-md border border-gray-600  w-full space-y-4 ">
          <h3>Стадия {{ i + 1 }}</h3>
          <div class="w-full flex flex-row gap-2">
            <div class="w-1/2 space-y-2">
              <!--            <label class="text-mainText-500 block">Тип стадии</label>-->
              <select formControlName="stageType" type="text"
                     placeholder="Тип стадии"
                     class="bg-mainBackground text-mainText-500 placeholder-mainText-500 border border-mainText-500
                  rounded-md p-2 w-full focus:outline-none focus:ring-2 focus:ring-mainText-500">
                <option value="Single Elimination">Сетка</option>
                <option value="Groups">Группа</option>
              </select>
            </div>

            <div class="w-1/2 space-y-2">
              <!--            <label class="text-mainText-500 block">Формат финала</label>-->
              @if(this.form.value.stages[i].stageType=='Single Elimination'){
              <input formControlName="finalMatchFormat" type="text"
                     placeholder="Формат финала"
                     class="bg-mainBackground text-mainText-500 placeholder-mainText-500 border border-mainText-500
                  rounded-md p-2 w-full focus:outline-none focus:ring-2 focus:ring-mainText-500">}
            </div>
          </div>


          <div class="w-full flex flex-row gap-2">
          <div class="form-field space-y-2 w-1/2">
<!--            <label class="text-mainText-500 block">Формат матча</label>-->
            <input formControlName="matchFormat" type="text"
                   placeholder="Формат матча"
                   class="bg-mainBackground text-mainText-500 placeholder-mainText-500 border border-mainText-500
                  rounded-md p-2 w-full focus:outline-none focus:ring-2 focus:ring-mainText-500">
          </div>
            <div class="form-field space-y-2 w-1/2">
              <!--            <label class="text-mainText-500 block">Проходящих команд</label>-->



              @if(this.form.value.stages[i].stageType=='Groups'){
              <input formControlName="teamsToAdvance" type="text"
                     placeholder="Проходящих команд"
                     class="bg-mainBackground text-mainText-500 placeholder-mainText-500 border border-mainText-500
                  rounded-md p-2 w-full focus:outline-none focus:ring-2 focus:ring-mainText-500">}
            </div>


<!--            <input formControlName="matchForTheThirdPlace" type="checkbox"-->
<!--                   placeholder="Матч за 3 место"-->
<!--                   class="w-4 h-4 text-mainText-500 border-mainText-500 rounded focus:ring-mainText-500">-->
<!--          </div>-->
          </div>
          <div class="w-full flex flex-row justify-between gap-2">
          <div class="form-field space-y-2 w-1/3">
<!--            <label class="text-mainText-500 block">Количество групп</label>-->
            @if(this.form.value.stages[i].stageType=='Groups'){
            <input formControlName="numberOfGroups" type="text"
                   placeholder="Количество групп"
                   class="bg-mainBackground text-mainText-500 placeholder-mainText-500 border border-mainText-500
                  rounded-md p-2 w-full focus:outline-none focus:ring-2 focus:ring-mainText-500">}
          </div>



          <div class="form-field space-y-2 flex-1">
<!--            <label class="text-mainText-500 block">Количество раундов</label>-->
            @if(this.form.value.stages[i].stageType=='Groups'){
            <input formControlName="totalRounds" type="text"
                   placeholder="Количество раундов"
                   class="bg-mainBackground text-mainText-500 placeholder-mainText-500 border border-mainText-500
                  rounded-md p-2 w-full focus:outline-none focus:ring-2 focus:ring-mainText-500">}
          </div>

            <div class="form-field flex items-center gap-1 relative  flex-0">
              @if(this.form.value.stages[i].stageType=='Single Elimination'){
              <input
                type="checkbox"
                formControlName="matchForTheThirdPlace"
                class="absolute opacity-0 w-5 h-5 cursor-pointer peer"
              />}
              <!-- Кастомный индикатор выбора -->
              <span class="w-5 h-5 rounded-full border-2 border-mainText-700 peer-checked:border-mainBlue peer-checked:bg-mainHover flex items-center justify-center pointer-events-none">
    <svg class="w-3 h-3 text-white hidden peer-checked:block" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
    </svg>
  </span>
              <span class="text-mainText-700 font-medium ">Матч за 3 место</span>
            </div>
          </div>

          <app-button [title]="'Удалить стадию'" (click)="removeStage(i)" class="bg-headerBackground"
                      [classButton]="'mt-4 px-4 py-2 !bg-headerBackground  rounded-md  transition-colors'"/>



      </div>
      </div>


      </ng-template>
    </app-step>

  </app-stepper>
  </form>
</div>
